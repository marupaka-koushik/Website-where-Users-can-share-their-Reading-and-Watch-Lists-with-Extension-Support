{"ast":null,"code":"var _jsxFileName = \"/Users/koushikmarupaka/Desktop/summarise/website/frontend/src/pages/DashboardPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { BookOpen, TrendingUp, Users, Plus, Trash2 } from 'lucide-react';\nimport axios from 'axios';\nimport './DashboardPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardPage = () => {\n  _s();\n  const {\n    user,\n    isAuthenticated\n  } = useAuth();\n  const {\n    username\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [content, setContent] = useState([]);\n  const [selectedContent, setSelectedContent] = useState(null);\n  const [stats, setStats] = useState({\n    totalContent: 0,\n    totalSummaries: 0,\n    followerCount: 0,\n    followingCount: 0\n  });\n  const [loading, setLoading] = useState(true);\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n  useEffect(() => {\n    // Redirect legacy /dashboard route to user-specific route\n    if (location.pathname === '/dashboard' && isAuthenticated && user !== null && user !== void 0 && user.username) {\n      navigate(`/u/${user.username}`, {\n        replace: true\n      });\n      return;\n    }\n\n    // Validate that URL username matches logged-in user (extra security layer)\n    if (username && isAuthenticated && user !== null && user !== void 0 && user.username && username !== user.username) {\n      navigate(`/u/${user.username}`, {\n        replace: true\n      });\n      return;\n    }\n    const loadDashboardData = async () => {\n      if (isAuthenticated) {\n        await fetchUserContent();\n        await fetchUserStats();\n      }\n    };\n    loadDashboardData();\n  }, [isAuthenticated, user, navigate, location.pathname, username]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchUserContent = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/content`);\n      setContent(response.data.content || []);\n    } catch (error) {\n      console.error('Error fetching content:', error);\n    }\n  };\n  const fetchUserStats = async () => {\n    try {\n      // Since we have user stats in the user object, we can use those\n      if (user) {\n        var _user$stats, _user$stats2;\n        setStats({\n          totalContent: ((_user$stats = user.stats) === null || _user$stats === void 0 ? void 0 : _user$stats.totalContent) || 0,\n          totalSummaries: ((_user$stats2 = user.stats) === null || _user$stats2 === void 0 ? void 0 : _user$stats2.totalSummaries) || 0,\n          followerCount: user.followerCount || 0,\n          followingCount: user.followingCount || 0\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleContentClick = async contentId => {\n    try {\n      const response = await axios.get(`${API_URL}/content/${contentId}`, {\n        headers: {\n          'Authorization': `Bearer ${sessionStorage.getItem('token')}`\n        }\n      });\n      setSelectedContent(response.data.content);\n    } catch (error) {\n      console.error('Error fetching content details:', error);\n    }\n  };\n  const closeContentModal = () => {\n    setSelectedContent(null);\n  };\n  const deleteContent = async contentId => {\n    if (window.confirm('Are you sure you want to delete this content?')) {\n      try {\n        await axios.delete(`${API_URL}/content/${contentId}`, {\n          headers: {\n            'Authorization': `Bearer ${sessionStorage.getItem('token')}`\n          }\n        });\n\n        // Remove the deleted content from state\n        setContent(prev => prev.filter(item => item._id !== contentId));\n\n        // If the deleted content is currently selected, close the modal\n        if ((selectedContent === null || selectedContent === void 0 ? void 0 : selectedContent._id) === contentId) {\n          setSelectedContent(null);\n        }\n        alert('Content deleted successfully');\n      } catch (error) {\n        console.error('Error deleting content:', error);\n        alert('Failed to delete content. Please try again.');\n      }\n    }\n  };\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-required\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Please log in to access your dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading your dashboard...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"Welcome back, \", (user === null || user === void 0 ? void 0 : user.fullName) || (user === null || user === void 0 ? void 0 : user.username), \"!\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Here's what's happening with your content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"header-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"install-extension\",\n            children: [/*#__PURE__*/_jsxDEV(Plus, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Install Chrome Extension to start adding content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stats-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n            className: \"stat-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: stats.totalContent\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Total Content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(TrendingUp, {\n            className: \"stat-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: stats.totalSummaries\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Summaries Generated\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"stat-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: stats.followerCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Followers\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            className: \"stat-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: stats.followingCount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Following\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Recent Content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this), content.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content-grid\",\n          children: content.slice(0, 6).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content-card\",\n            onClick: () => handleContentClick(item._id),\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"content-title-section\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: item.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"content-source\",\n                  children: item.siteName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"content-delete-btn\",\n                onClick: e => {\n                  e.stopPropagation();\n                  deleteContent(item._id);\n                },\n                title: \"Delete content\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content-preview\",\n              children: (() => {\n                // Handle summary object vs string\n                if (item.summary) {\n                  if (typeof item.summary === 'string') {\n                    return /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [item.summary.substring(0, 150), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 220,\n                      columnNumber: 34\n                    }, this);\n                  } else if (item.summary.text) {\n                    return /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [item.summary.text.substring(0, 150), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 34\n                    }, this);\n                  }\n                }\n                // Fallback to content if no valid summary\n                if (item.content && typeof item.content === 'string') {\n                  return /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [item.content.substring(0, 150), \"...\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 32\n                  }, this);\n                }\n                return /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"No preview available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 30\n                }, this);\n              })()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content-footer\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"content-date\",\n                children: new Date(item.createdAt).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: item.url,\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                className: \"content-link\",\n                onClick: e => e.stopPropagation(),\n                children: \"View Original\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)]\n          }, item._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state\",\n          children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n            size: 48\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"No content yet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Install our Chrome extension and start extracting content from your favorite websites!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), selectedContent && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content-modal\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: selectedContent.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"modal-header-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"modal-delete-btn\",\n                onClick: () => deleteContent(selectedContent._id),\n                title: \"Delete content\",\n                children: /*#__PURE__*/_jsxDEV(Trash2, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"close-modal\",\n                onClick: closeContentModal,\n                children: \"\\xD7\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"content-source\",\n              children: selectedContent.siteName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content-details\",\n              children: [selectedContent.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                src: selectedContent.imageUrl,\n                alt: selectedContent.title,\n                className: \"content-image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"content-text\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"content-date\",\n                  children: new Date(selectedContent.createdAt).toLocaleDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"content-summary\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"summary-header\",\n                    children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                      children: \"AI Summary:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 23\n                  }, this), (() => {\n                    // Handle summary object vs string\n                    if (selectedContent.summary) {\n                      if (typeof selectedContent.summary === 'string') {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"summary-text\",\n                          children: selectedContent.summary\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 293,\n                          columnNumber: 36\n                        }, this);\n                      } else if (selectedContent.summary.text) {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"summary-text\",\n                          children: [selectedContent.summary.text, /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"summary-meta\",\n                            children: /*#__PURE__*/_jsxDEV(\"small\", {\n                              children: [\"Generated \", selectedContent.summary.generatedAt ? new Date(selectedContent.summary.generatedAt).toLocaleString() : 'recently', \" \\u2022 Status: \", selectedContent.summary.status]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 299,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 298,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 296,\n                          columnNumber: 31\n                        }, this);\n                      } else if (selectedContent.summary.status === 'not_requested') {\n                        return /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"no-summary-note\",\n                          children: \"No summary available\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 309,\n                          columnNumber: 36\n                        }, this);\n                      }\n                    }\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"no-summary-note\",\n                      children: \"No summary available\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 312,\n                      columnNumber: 32\n                    }, this);\n                  })()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  href: selectedContent.url,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  className: \"content-link\",\n                  children: \"View Full Content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardPage, \"y1WWHo+zxsHWzrbw5PHjSoEt8jA=\", false, function () {\n  return [useAuth, useParams, useNavigate, useLocation];\n});\n_c = DashboardPage;\nexport default DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","useParams","useNavigate","useLocation","BookOpen","TrendingUp","Users","Plus","Trash2","axios","jsxDEV","_jsxDEV","DashboardPage","_s","user","isAuthenticated","username","navigate","location","content","setContent","selectedContent","setSelectedContent","stats","setStats","totalContent","totalSummaries","followerCount","followingCount","loading","setLoading","API_URL","process","env","REACT_APP_API_URL","pathname","replace","loadDashboardData","fetchUserContent","fetchUserStats","response","get","data","error","console","_user$stats","_user$stats2","handleContentClick","contentId","headers","sessionStorage","getItem","closeContentModal","deleteContent","window","confirm","delete","prev","filter","item","_id","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","fullName","size","length","slice","map","onClick","style","cursor","title","siteName","e","stopPropagation","summary","substring","text","Date","createdAt","toLocaleDateString","href","url","target","rel","imageUrl","src","alt","generatedAt","toLocaleString","status","_c","$RefreshReg$"],"sources":["/Users/koushikmarupaka/Desktop/summarise/website/frontend/src/pages/DashboardPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useParams, useNavigate, useLocation } from 'react-router-dom';\nimport { BookOpen, TrendingUp, Users, Plus, Trash2 } from 'lucide-react';\nimport axios from 'axios';\nimport './DashboardPage.css';\n\nconst DashboardPage = () => {\n  const { user, isAuthenticated } = useAuth();\n  const { username } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [content, setContent] = useState([]);\n  const [selectedContent, setSelectedContent] = useState(null);\n  const [stats, setStats] = useState({\n    totalContent: 0,\n    totalSummaries: 0,\n    followerCount: 0,\n    followingCount: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\n  useEffect(() => {\n    // Redirect legacy /dashboard route to user-specific route\n    if (location.pathname === '/dashboard' && isAuthenticated && user?.username) {\n      navigate(`/u/${user.username}`, { replace: true });\n      return;\n    }\n\n    // Validate that URL username matches logged-in user (extra security layer)\n    if (username && isAuthenticated && user?.username && username !== user.username) {\n      navigate(`/u/${user.username}`, { replace: true });\n      return;\n    }\n\n    const loadDashboardData = async () => {\n      if (isAuthenticated) {\n        await fetchUserContent();\n        await fetchUserStats();\n      }\n    };\n    \n    loadDashboardData();\n  }, [isAuthenticated, user, navigate, location.pathname, username]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const fetchUserContent = async () => {\n    try {\n      const response = await axios.get(`${API_URL}/content`);\n      setContent(response.data.content || []);\n    } catch (error) {\n      console.error('Error fetching content:', error);\n    }\n  };\n\n  const fetchUserStats = async () => {\n    try {\n      // Since we have user stats in the user object, we can use those\n      if (user) {\n        setStats({\n          totalContent: user.stats?.totalContent || 0,\n          totalSummaries: user.stats?.totalSummaries || 0,\n          followerCount: user.followerCount || 0,\n          followingCount: user.followingCount || 0\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching stats:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleContentClick = async (contentId) => {\n    try {\n      const response = await axios.get(`${API_URL}/content/${contentId}`, {\n        headers: {\n          'Authorization': `Bearer ${sessionStorage.getItem('token')}`\n        }\n      });\n      setSelectedContent(response.data.content);\n    } catch (error) {\n      console.error('Error fetching content details:', error);\n    }\n  };\n\n  const closeContentModal = () => {\n    setSelectedContent(null);\n  };\n\n  const deleteContent = async (contentId) => {\n    if (window.confirm('Are you sure you want to delete this content?')) {\n      try {\n        await axios.delete(`${API_URL}/content/${contentId}`, {\n          headers: {\n            'Authorization': `Bearer ${sessionStorage.getItem('token')}`\n          }\n        });\n        \n        // Remove the deleted content from state\n        setContent(prev => prev.filter(item => item._id !== contentId));\n        \n        // If the deleted content is currently selected, close the modal\n        if (selectedContent?._id === contentId) {\n          setSelectedContent(null);\n        }\n        \n        alert('Content deleted successfully');\n      } catch (error) {\n        console.error('Error deleting content:', error);\n        alert('Failed to delete content. Please try again.');\n      }\n    }\n  };\n\n  if (!isAuthenticated) {\n    return (\n      <div className=\"dashboard-page\">\n        <div className=\"auth-required\">\n          <h2>Please log in to access your dashboard</h2>\n        </div>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"dashboard-page\">\n        <div className=\"loading\">Loading your dashboard...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"dashboard-page\">\n      <div className=\"dashboard-container\">\n        {/* Header */}\n        <div className=\"dashboard-header\">\n          <div className=\"header-content\">\n            <h1>Welcome back, {user?.fullName || user?.username}!</h1>\n            <p>Here's what's happening with your content</p>\n          </div>\n          <div className=\"header-actions\">\n            <div className=\"install-extension\">\n              <Plus size={20} />\n              <span>Install Chrome Extension to start adding content</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"stats-grid\">\n          <div className=\"stat-card\">\n            <BookOpen className=\"stat-icon\" />\n            <div className=\"stat-info\">\n              <h3>{stats.totalContent}</h3>\n              <p>Total Content</p>\n            </div>\n          </div>\n          \n          <div className=\"stat-card\">\n            <TrendingUp className=\"stat-icon\" />\n            <div className=\"stat-info\">\n              <h3>{stats.totalSummaries}</h3>\n              <p>Summaries Generated</p>\n            </div>\n          </div>\n          \n          <div className=\"stat-card\">\n            <Users className=\"stat-icon\" />\n            <div className=\"stat-info\">\n              <h3>{stats.followerCount}</h3>\n              <p>Followers</p>\n            </div>\n          </div>\n          \n          <div className=\"stat-card\">\n            <Users className=\"stat-icon\" />\n            <div className=\"stat-info\">\n              <h3>{stats.followingCount}</h3>\n              <p>Following</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Recent Content */}\n        <div className=\"dashboard-section\">\n          <h2>Recent Content</h2>\n          {content.length > 0 ? (\n            <div className=\"content-grid\">\n              {content.slice(0, 6).map((item) => (\n                <div \n                  key={item._id} \n                  className=\"content-card\" \n                  onClick={() => handleContentClick(item._id)}\n                  style={{ cursor: 'pointer' }}\n                >\n                  <div className=\"content-header\">\n                    <div className=\"content-title-section\">\n                      <h3>{item.title}</h3>\n                      <span className=\"content-source\">{item.siteName}</span>\n                    </div>\n                    <button \n                      className=\"content-delete-btn\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        deleteContent(item._id);\n                      }}\n                      title=\"Delete content\"\n                    >\n                      <Trash2 size={16} />\n                    </button>\n                  </div>\n                  <div className=\"content-preview\">\n                    {(() => {\n                      // Handle summary object vs string\n                      if (item.summary) {\n                        if (typeof item.summary === 'string') {\n                          return <p>{item.summary.substring(0, 150)}...</p>;\n                        } else if (item.summary.text) {\n                          return <p>{item.summary.text.substring(0, 150)}...</p>;\n                        }\n                      }\n                      // Fallback to content if no valid summary\n                      if (item.content && typeof item.content === 'string') {\n                        return <p>{item.content.substring(0, 150)}...</p>;\n                      }\n                      return <p>No preview available</p>;\n                    })()}\n                  </div>\n                  <div className=\"content-footer\">\n                    <span className=\"content-date\">\n                      {new Date(item.createdAt).toLocaleDateString()}\n                    </span>\n                    <a \n                      href={item.url} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"content-link\"\n                      onClick={(e) => e.stopPropagation()}\n                    >\n                      View Original\n                    </a>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"empty-state\">\n              <BookOpen size={48} />\n              <h3>No content yet</h3>\n              <p>Install our Chrome extension and start extracting content from your favorite websites!</p>\n            </div>\n          )}\n        </div>\n\n        {/* Content Modal */}\n        {selectedContent && (\n          <div className=\"content-modal\">\n            <div className=\"modal-content\">\n              <div className=\"modal-header\">\n                <h2>{selectedContent.title}</h2>\n                <div className=\"modal-header-actions\">\n                  <button \n                    className=\"modal-delete-btn\"\n                    onClick={() => deleteContent(selectedContent._id)}\n                    title=\"Delete content\"\n                  >\n                    <Trash2 size={18} />\n                  </button>\n                  <span className=\"close-modal\" onClick={closeContentModal}>&times;</span>\n                </div>\n              </div>\n              <div className=\"modal-body\">\n                <p className=\"content-source\">{selectedContent.siteName}</p>\n                <div className=\"content-details\">\n                  {selectedContent.imageUrl && (\n                    <img src={selectedContent.imageUrl} alt={selectedContent.title} className=\"content-image\" />\n                  )}\n                  <div className=\"content-text\">\n                    <p className=\"content-date\">\n                      {new Date(selectedContent.createdAt).toLocaleDateString()}\n                    </p>\n                    <div className=\"content-summary\">\n                      <div className=\"summary-header\">\n                        <h4>AI Summary:</h4>\n                      </div>\n                      {(() => {\n                        // Handle summary object vs string\n                        if (selectedContent.summary) {\n                          if (typeof selectedContent.summary === 'string') {\n                            return <div className=\"summary-text\">{selectedContent.summary}</div>;\n                          } else if (selectedContent.summary.text) {\n                            return (\n                              <div className=\"summary-text\">\n                                {selectedContent.summary.text}\n                                <div className=\"summary-meta\">\n                                  <small>\n                                    Generated {selectedContent.summary.generatedAt ? \n                                      new Date(selectedContent.summary.generatedAt).toLocaleString() : \n                                      'recently'\n                                    } â€¢ Status: {selectedContent.summary.status}\n                                  </small>\n                                </div>\n                              </div>\n                            );\n                          } else if (selectedContent.summary.status === 'not_requested') {\n                            return <div className=\"no-summary-note\">No summary available</div>;\n                          }\n                        }\n                        return <div className=\"no-summary-note\">No summary available</div>;\n                      })()}\n                    </div>\n                    <a \n                      href={selectedContent.url} \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"content-link\"\n                    >\n                      View Full Content\n                    </a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DashboardPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}